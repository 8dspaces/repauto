= render partial: "projects/menu", locals: {project: @test_run.project}
= render partial: "breadcrumb", locals: {test_run: @test_run}

.page-header
  %h1
    = @test_run.name
    %small
      = @test_run.start.strftime("%a, %b %d %Y")
      - if @test_run.in_progress
        %span.label.label-default in progress

  .btn-toolbar{ role: 'toolbar' }
    .btn-group{ role: "group"}
      -# = link_to "delete", archive_test_run_path(@test_run), class: "btn btn-danger"
      %button.btn.btn-danger{ 'data-toggle': 'modal', 'data-target': '#confirm'} delete
      = confirmation archive_test_run_path(@test_run), 'confirm'
      = link_to "report", link(@test_run.report_path), class: "btn btn-default"
      = link_to "errors", errors_test_run_path(@test_run), class: "btn btn-default"
      = link_to "timeline", timeline_test_run_path(@test_run), class: "btn btn-default"
    .btn-group
      = form_tag(test_run_path(@test_run), method: 'get') do
        %select#tags{multiple: 'multiple'}
          - Tag.get_all.each do |t|
            - if params[:tags] && params[:tags].any?{ |tag| tag == t }
              %option{value: t, selected: 'selected'}= t
            - else
              %option{value: t}= t
        = button_tag 'Go', class: 'btn btn-default', name: 'type', value: 'selected'

- cache do
  .panel-group#accordion1
    - @test_run.test_suites.each do |test_suite|
      = render test_suite
